<!DOCTYPE html>
<html lang="en">
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      
    

<title>Yesod (and Haskell) from a Drupal (and PHP) Perspective</title>


      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
      <meta property="og:site_name" content="Gizra">

      
        <meta property="og:title" content="Yesod (and Haskell) from a Drupal (and PHP) Perspective">
      

      
      <meta name="description" content="Should you use Yesod or Drupal? You can actually enjoy both worlds.">
      <meta property="og:description" content="Should you use Yesod or Drupal? You can actually enjoy both worlds.">
      <meta name="twitter:card" content="summary_large_image" />
      <meta name="twitter:site" content="@gizra_drupal" />
      

      
      <meta property="og:image" content="http://www.gizra.com/assets/images/posts/yesod-drupal/thumb.jpg">
      

      <!-- Favicon for all platforms -->
      <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon-180x180.4fe6.png">
      <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.c391.png" sizes="32x32">
      <link rel="icon" type="image/png" href="/images/favicons/favicon-194x194.2d07.png" sizes="194x194">
      <link rel="icon" type="image/png" href="/images/favicons/favicon-96x96.8557.png" sizes="96x96">
      <link rel="icon" type="image/png" href="/images/favicons/android-chrome-192x192.8b66.png" sizes="192x192">
      <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.a93c.png" sizes="16x16">
      <link rel="manifest" href="/images/favicons/manifest.json">
      <meta name="msapplication-TileColor" content="#000000">
      <meta name="msapplication-TileImage" content="/images/favicons/mstile-144x144.png">
      <meta name="theme-color" content="#ffffff">
      <!-- End favicon for all platforms -->

      <link rel="stylesheet" href="/css/main.fc76.css"/>
      <link href='https://fonts.googleapis.com/css?family=Hind:400,600,300,500' rel='stylesheet' type='text/css'>
      <link href='https://fonts.googleapis.com/css?family=Raleway:400,300,600,800' rel='stylesheet' type='text/css'>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
      <!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6558346-3', 'auto');
  ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


      <!-- Begin Inspectlet Embed Code -->
      <script type="text/javascript" id="inspectletjs">
      window.__insp = window.__insp || [];
      __insp.push(['wid', 314054580]);
      (function() {
      function ldinsp(){if(typeof window.__inspld != "undefined") return; window.__inspld = 1; var insp = document.createElement('script'); insp.type = 'text/javascript'; insp.async = true; insp.id = "inspsync"; insp.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://cdn.inspectlet.com/inspectlet.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(insp, x); };
      setTimeout(ldinsp, 500); document.readyState != "complete" ? (window.attachEvent ? window.attachEvent('onload', ldinsp) : window.addEventListener('load', ldinsp, false)) : ldinsp();
      })();
      </script>
      <!-- End Inspectlet Embed Code -->

    </head>
    <body>

    <!-- Main content -->
    
  



  
    
      
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  


<header id="header-global">
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        
  

<span class="gizra-logo">
  <a href="/">
    <svg xmlns="http://www.w3.org/2000/svg" width="252" height="104"><title>gizra</title><path fill="#E27058" fill-rule="evenodd" d="M44.3 21.6c.2 3.5 3 5.4 6 5.4 3.5 0 6.7-2 6.7-7s-3.6-7.7-8.5-7.7c-4.3 0-10.3 2.5-10.3 11 0 1.7.2 3.4.6 5.3-3.4-2-6.5-2.6-11.6-2.6-16 0-22.7 7.6-22.7 17.5 0 8.7 4 13.7 12.2 16-8.2 5-12 7.8-12 13.8C4.7 78 8 83 20.7 83h10c11 0 13.4 2 13.4 7 0 6.7-5.8 11.3-17 11.3s-13.4-4.7-13.4-9c0-1.8.2-3.5 1-5.8l-6.4-3C4.5 84.8.2 87 .2 92c0 6.8 7.5 11.3 25.8 11.3 21.2 0 29.6-8.5 29.6-20 0-14.4-12-17.2-23.8-17.2H21c-5.5 0-6.6-.4-6.6-1.4 0-1 1-2 4.6-4.4 2.2.4 5.4.8 8.5.8C40.3 61 49 55 49 43c0-6.8-4-10.5-8-13.3-.6-2.5-.8-4.6-.8-6.3 0-6.5 3-7 4.5-7 2.2 0 2.8 1.7 2.5 3.4l-3 1.8zM22 41.2C22 29.7 24 28 27 28s4.6 1.4 4.6 13.2v5c0 11-1.8 12.7-4.6 12.7-3.2 0-5-2.3-5-12V41zM62 10c0 4.4 2 9.8 10.6 9.8 7.6 0 10.6-4.3 10.6-10 0-6.3-3.8-9.6-10.4-9.6C65 .2 62 5 62 10zm-5.4 17v2h6.2v46H57v2h31.2v-2h-6V27H56.7zm82.5 0H95l-1.4 20.2H95c4.3-15 8-18.3 22.2-18.3h1L93 75.3V77h44l1.8-21.5h-1.5C133.5 69 127.5 75 115.6 75h-1.4l25-46v-2zm41 3c2.2 0 4.3 1 2.2 5.3h-3.8c-2.2 7.5 1 12 8.2 12 5.6 0 8.8-4 8.8-10 0-8-5-11.3-11.2-11.3-6.3 0-12 3.6-14 11V27H145v2h5.7v46h-5.8v2h32.6v-2h-7.4V47c0-9.5 4.7-17 9.7-17zm40.5 22.3c-15 0-24.2 2.4-24.2 13 0 10.5 8.2 12.8 15.6 12.8 7.2 0 10.3-2.7 12-7.7 1.2 5 6 7.8 14.4 7.8 9 0 13-3.5 13.5-16l-1.7-.2c-.5 8.8-2.3 10.8-4.2 10.8-1.7 0-3-1.2-3-5.5V46c0-15.2-5.5-19.8-22-19.8-14.3 0-22 4-22 13 0 5 2.6 8.6 9 8.6 5.3 0 9.3-3.3 9.3-8.2 0-2-.3-3.4-.8-4.7H214c-.6-1.2-.8-2.2-.8-3 0-3.4 3-4.3 5-4.3 4.2 0 5.3 3.5 5.3 16.8v8h-3zM219 73.8c-2 0-2.7-1-2.7-8.6v-1.6c0-6.4 2-9.6 6.5-9.6h.7v9.8c0 6.7-2.5 10-4.5 10z"/></svg>
  </a>
</span>
<h1 class="sr-only">Gizra</h1>
<nav id="nav" role="navigation" class="navbar navbar-default">
  <div class="navbar-header">
    <button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
  </div>
  <div class="navbar-collapse collapse">
    <ul class="nav navbar-nav">
      <li><a href="/#about" class="smooth-scroll-to">About</a></li>
      <li><a href="/services">Our Work</a></li>
      <li><a href="/team">Team</a></li>
      <li><a href="/blog">Blog</a></li>
      <li><a href="/fit">Do We Fit?</a></li>
      <li><a href="/contact">Contact</a></li>
    </ul>
  </div>
</nav>

      </div>
    </div>
  </div>
</header>
<article id="post-page">
  <div class="container">
    <div class="row">
      <div id="post-title" class="col-sm-10 col-sm-offset-1">
        <h1><a href="/content/haskell-yesod-php-drupal">Yesod (and Haskell) from a Drupal (and PHP) Perspective </a></h1>
        <div class="post-author">By Amitai Burstein</div>
      </div>
    </div>
    <div class="row">
      <div id="post-data" class="col-sm-2 col-sm-offset-1">
  			<div id="post-label">
  		 		<a href="/blog"><span class="label label-default">Gizra Blog</span></a>
  			</div>
        <div class="date">22 Sep 2016</div>
        <section class="author-details">
          <div class="image-wrapper">
            <img src="/images/team/avatars/amitaibu.a340.jpg" class="img-circle img-responsive">
          </div>
          <div class="text-wrapper">
            <span class="name">Amitai Burstein</span>
            
              <span class="twitter">(@amitaibu)</span>
            
            <div class="title">CTO, Co-Owner</div>
            <div class="bio">Maintainer of Organic groups, the Message stack, and co-maintainer of Drupal 8's Entity reference. <a href="/content/the-about-story/">The about story</a>.</div>
          </div>
        </section>
        <div class="tags">
          <div class="title">Tags:</div>
          
            <ul class="inline">
              
              

  
    
      <li><a href="/tags.html#Drupal-planet-ref">Drupal-planet</a></li>
    
      <li><a href="/tags.html#Yesod-ref">Yesod</a></li>
    
      <li><a href="/tags.html#Haskell-ref">Haskell</a></li>
    
  


            </ul>
          
        </div>
      </div>
      <div id="post-content" class="col-sm-8">

        <p>In Gizra, we run an unusual stack. Drupal, our bread and butter, serves as the backend and is complimented by <a href="http://elm-lang.org/">Elm</a> for the front end, and as of recently <a href="http://www.yesodweb.com/">Yesod</a> - a Haskell framework.<br>
Before Yesod, we were running NodeJs as our proxy server for light tasks or real-time messages.</p>

<p>But ever since I came across Elm, Javascript and I are hardly friends. I respect it, but can no longer turn my eye from its shortcomings. Functional programming has caught my heart and mind.</p>

<p>In this post I&rsquo;m not going to try and present strong points on why <em>you</em> should adapt this stack, but rather share with you the unique path we are paving.</p>

<h2>Elm</h2>

<p>Elm was my first dip into the functional programming (FP) world. I recommend starting from there. It&rsquo;s way more gentle than Haskell, and it has, of course, one important advantage - it helps you build rock solid, crazily fast, joy-filling, web apps.</p>

<p>Maybe this <a href="http://www.gizra.com/content/faithful-elm-amazing-router/">post and video</a> will get you excited as well.</p>

<h2>Gentle Intro to Haskell</h2>

<p>A good way to start explaining what&rsquo;s so special about Haskell is to dive directly into Haskell. While PHP is defined (by some) as a &ldquo;productive&rdquo; language, Haskell is often blamed (by some) as being an &ldquo;academic language&rdquo;. Both statements are probably wrong.</p>

<p>Often when mentioning Haskell, we talk about the compiler and the type system. They are truly marvelous tools. For the type system, I think the Elm post I lined above should be enough to get the hang of it. But I&rsquo;d like to continue and reveal a bit more by highlighting mini examples on how Haskell makes us approach development tasks differently.</p>

<h3>Lists</h3>

<p>Below are examples from the REPL (the interactive shell for Haskell)</p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="o">&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">++</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</code></pre></div>
<p>What we have here are two lists of integers that are appended to each other. A list of integers is represented as <code>[Int]</code> in Haskell. The <code>++</code> is the operation that causes those two lists to be grouped into a single one.</p>

<p>Haskell comes with some handy shortcuts.</p>

<!-- more -->
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="o">&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">]</span> <span class="o">++</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>

<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
</code></pre></div>
<p>And even ones that can save a few lines of <code>foreach</code>:</p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="o">&gt;</span> <span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">|</span> <span class="n">x</span> <span class="ow">&lt;-</span> <span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">]]</span>

<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</code></pre></div>
<p>The above is asking Haskell to generate a list of <code>Int</code> from 1 to 3, and feed it into <code>x * 2</code>. We can also do fancier stuff here, like take a list from 1 to 10, but use only the even numbers:</p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="o">&gt;</span> <span class="p">[</span><span class="n">x</span> <span class="o">|</span> <span class="n">x</span> <span class="ow">&lt;-</span> <span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">],</span> <span class="n">rem</span> <span class="n">x</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>

<span class="p">[</span><span class="mi">2</span> <span class="p">,</span><span class="mi">4</span> <span class="p">,</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
</code></pre></div>
<p>A <code>String</code> in Haskell is actually a list of <code>Char</code> (<code>[Char]</code> in Haskell talk). So this may seem a little surprising, but we can actually act on the list of chars in the same way we did with numbers.</p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="o">&gt;</span> <span class="p">[</span><span class="n">&#39;a&#39;</span><span class="o">..</span><span class="n">&#39;e&#39;</span><span class="p">]</span>

<span class="s">&quot;abcde&quot;</span>


<span class="o">&gt;</span> <span class="p">[</span><span class="n">&#39;a&#39;</span><span class="o">..</span><span class="n">&#39;e&#39;</span><span class="p">]</span> <span class="o">++</span> <span class="p">[</span><span class="n">&#39;f&#39;</span><span class="o">..</span><span class="n">&#39;h&#39;</span><span class="p">]</span>

<span class="s">&quot;abcdefgh&quot;</span>

<span class="o">&gt;</span> <span class="s">&quot;Hello &quot;</span> <span class="o">++</span> <span class="p">[</span><span class="n">&#39;w&#39;</span><span class="p">,</span> <span class="n">&#39;o&#39;</span><span class="p">,</span> <span class="n">&#39;r&#39;</span><span class="p">,</span> <span class="n">&#39;l&#39;</span><span class="p">,</span> <span class="n">&#39;d&#39;</span><span class="p">]</span>

<span class="s">&quot;Hello world&quot;</span>
</code></pre></div>
<h3>Abstractions</h3>

<p>So far, nothing here is overly complicated or life changing. When I gave this talk in Gizra, even the non-devs weren&rsquo;t alarmed at this point. No glazing eyes (yet).</p>

<p>Now we can start looking at how Haskell brings a different approach to programming. One that, as Drupal developers, we are not too familiar with.</p>

<p>The fine folks of Haskell looked at the appending of the lists, and probably told themselves &ldquo;Hey, there&rsquo;s a pattern here, and it can be satisfied by a set of rules&rdquo;. The pattern they recognized is the fact that we need to append variables of the same type. That is, two lists of integers can be added together and form a longer list of integers. The type doesn&rsquo;t change, just the number of members inside of it.</p>

<p>The <code>++</code> operation we saw can be generalized and called <code>mappend</code>. All the following will have the same result:</p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="o">&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">++</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="o">&gt;</span> <span class="n">mappend</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="c1">-- The backtick sign (`) means we can use the mappend between both arguments.</span>
<span class="o">&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="p">`</span><span class="n">mappend</span><span class="p">`</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</code></pre></div>
<p>So, trick question: with the above abstraction in mind, what would you expect the result of appending two integers be?</p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="o">&gt;</span> <span class="mi">5</span> <span class="p">`</span><span class="n">mappend</span><span class="p">`</span> <span class="mi">6</span><span class="p">`</span>
</code></pre></div>
<p>Should it be 11 (5 + 6)? In that case why wouldn&rsquo;t it be 30 (5 * 6)?<br>
Or maybe even 56 (smashing the two digits together)?</p>

<p>It&rsquo;s unclear. However, Haskell has a solution. We can use types to explain to the computer what our <em>intention</em> is. So we have two types <code>Sum</code> and <code>Product</code>:</p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="o">&gt;</span> <span class="kt">Sum</span> <span class="mi">5</span> <span class="p">`</span><span class="n">mappend</span><span class="p">`</span> <span class="kt">Sum</span> <span class="mi">6</span>

<span class="mi">11</span>

<span class="o">&gt;</span> <span class="kt">Product</span> <span class="mi">5</span> <span class="p">`</span><span class="n">mappend</span><span class="p">`</span> <span class="kt">Product</span> <span class="mi">6</span>

<span class="mi">30</span>
</code></pre></div>
<h3>Monoid</h3>

<p>Hope you are not too afraid of the above title. <code>Monoid</code> is the name of the abstraction we just briefly went over. It should not be confused with the dreadful <code>Monad</code> term, which I have no intention to cover.</p>

<p>In PHP talk, a Monoid class is like an <code>interface</code> that has two methods: <code>mappend</code> and <code>mempty</code>.</p>

<p>The <code>mempty</code> defines an &ldquo;empty&rdquo; value. What is the empty value in the case of the above <code>Sum</code>?</p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="kt">Sum</span> <span class="mi">5</span> <span class="p">`</span><span class="n">mappend</span><span class="p">`</span> <span class="n">mempty</span> <span class="ow">=</span> <span class="kt">Sum</span> <span class="mi">5</span>
</code></pre></div>
<p><code>mempty</code> would be <code>Sum 0</code> (because 5 + 0 = 5).</p>

<p>And what would it be in the <code>Product</code> case?</p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="kt">Product</span> <span class="mi">5</span> <span class="p">`</span><span class="n">mappend</span><span class="p">`</span> <span class="n">mempty</span> <span class="ow">=</span> <span class="kt">Product</span> <span class="mi">5</span>
</code></pre></div>
<p><code>mempty</code> would be <code>Product 1</code> (because 5 * 1 = 5).</p>

<p>For completeness - the second and the last rule for a Monoid is that <code>mappend x y</code> should be equal to <code>mappend y x</code> (5 + 6 == 6 + 5).</p>

<p>That is it. You are on the path to Monoid zen. Now, let&rsquo;s put our knowledge to use, and try to implement an example.</p>

<h2>12 Hour Clock</h2>

<p>Here&rsquo;s a nice Monoid example I came across. Let&rsquo;s say we have an old clock with 12 hours. No AM or PM. Something like this</p>

<div class="thumbnail">
  <div class="img-wrapper">

    

    
      <img src="http://www.gizra.com/assets/images/posts/yesod-drupal/monoid.jpg">
    

  </div>
  
    <div class="caption">In case you missed out life in the past century, this is a clock</div>
  
</div>

<p>So let&rsquo;s say that time now is 10. What time will it be in 4 hours from now?</p>

<p>We cannot say 14, because inside the clock there are only 12 hours. We already know will happen - it&rsquo;s simply going to pass the 12 hours and &ldquo;reset&rdquo;. That is, the answer is 2.</p>

<p>Inside this clock we can continue adding numbers, but our logic will never fail. Any number we add will never fall outside of the clock, thus causing the universe to collapse into itself.</p>

<p>Monoid can help us accomplish this behavior because we are able to define our own completely arbitrary new type, and have a standardized way to explain to the computer how numbers are to be appended.</p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="kr">data</span> <span class="kt">Clock12Hours</span> <span class="ow">=</span> <span class="kt">Clock12Hours</span> <span class="kt">Int</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">)</span>

<span class="kr">instance</span> <span class="kt">Monoid</span> <span class="kt">Clock12Hours</span> <span class="kr">where</span>
    <span class="n">mappend</span> <span class="p">(</span><span class="kt">Clock12Hours</span> <span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="kt">Clock12Hours</span> <span class="n">y</span><span class="p">)</span> <span class="ow">=</span> <span class="kt">Clock12Hours</span> <span class="o">$</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span> <span class="p">`</span><span class="n">mod</span><span class="p">`</span> <span class="mi">12</span>
    <span class="n">mempty</span> <span class="ow">=</span> <span class="kt">Clock12Hours</span> <span class="mi">12</span>
</code></pre></div>
<p>Don&rsquo;t bother too much with the above code&rsquo;s syntax. What&rsquo;s important here is to understand that after defining this Haskell <code>instance</code>  - or in PHP talk say that <code>Clock12Hours</code> is implementing the <code>Monoid</code> interface - we can use the same <code>mappend</code> we used above with integers and chars.</p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="o">&gt;</span> <span class="kt">Clock12Hours</span> <span class="mi">4</span> <span class="p">`</span><span class="n">mappend</span><span class="p">`</span> <span class="kt">Clock12Hours</span> <span class="mi">10</span>

<span class="kt">Clock12Hours</span> <span class="mi">2</span>
</code></pre></div>
<h3>So What?</h3>

<p>How would we do this in PHP? That is, if we had something like:</p>
<div class="highlight"><pre><code class="php language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="nv">$hour1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Clock12Hour</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
<span class="nv">$hour2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Clock12Hour</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</code></pre></div>
<p>How can we add 10 + 4 in this PHP example? The idea of appending items, as seen in this example, was not generalized in PHP, so we are bound to think about this task differently.</p>

<p>My point here is that the language we&rsquo;re using for development is dictating the way we are able to articulate the problem, and the way we model the solution. I don&rsquo;t think, necessarily, one is better than the other (well actually I do, but I&rsquo;m not here for the flame wars), but rather looking to emphasize that Haskell is different enough from most other languages. Just by learning it - similar to learning Elm - can have a positive impact on our developers&#39; skills.</p>

<h2>Yesod</h2>

<p>Ok, back to web-development. That Haskell thingy we just saw? Yesod is built on top of it.</p>

<p>Haskell has a big learning curve. Admittedly, it took me more months than I&rsquo;d be happy to share, to understand some of the basic concepts. And I still don&rsquo;t understand many.</p>

<p>However, even though it&rsquo;s based on Haskell, in the day to day tasks, you don&rsquo;t really need to deal with all those abstractions. Your route will respond to some arguments, get data from the DB, massage the data, and send it to the templating system to be rendered.</p>

<p>It&rsquo;s hard to explain without providing lots of points why a framework is great. So I won&rsquo;t try, and instead
I&rsquo;ll give an anecdotal example that I love, because it illustrates to what degree of guarantees - that is, shifting run time errors to compilers errors - Yesod has reached.</p>

<p>In our Yesod website if we want to add Bootstrap CSS file, we write <code>addStylesheet $ StaticR css_bootstrap_css</code>.</p>

<p>We don&rsquo;t have a <code>static</code> folder in Drupal, but it can be roughly translated into <code>drupal_add_css(&#39;static/css/bootstrap.css&#39;);</code> which isn&rsquo;t something to brag about. We&rsquo;re just loading the CSS.</p>

<p>Well, not really. You see, in Yesod, if you will notice, we don&rsquo;t write <code>StaticR css/bootstrap.css</code> but rather use <code>css_bootstrap_css</code>. That string, as the docs <a href="https://github.com/yesodweb/yesod-scaffold/blob/9c6c7e0a59bdf56427ca7dcbf24afab7d0a31a67/Settings/StaticFiles.hs#L6">explain</a>, is a reference to the actual file.</p>

<p>This means that if the CSS file doesn&rsquo;t exist, the compiling will fail! You will get a big fat error message telling you to go and add the missing file because you probably don&rsquo;t want to deploy your website without its CSS.</p>

<p>Pushing code to production without all the necessary assets isn&rsquo;t something I&rsquo;ve done many time, but it has happen in the past. I wouldn&rsquo;t mind if it was guaranteed not to ever happen again, without me needing to put any cognitive effort into it.</p>

<h2>Unfair Comparisons</h2>

<p>Coming from a full blown CMS, frameworks tend to look appealing at times. They are so light, and so much faster.</p>

<p>Then, I find myself hand coding flag like functionality, which in Drupal is just a case of downloading a well tested module, enabling, and configuring.</p>

<p>In Yesod, I had to <a href="https://github.com/Gizra/yesoders/pull/5/files">write</a> it myself. There are some Yesod packages out there, but nowhere as near as what Drupal offers.</p>

<p>On the other hand, a lot of Drupal&rsquo;s modules are of low quality or very specific, so quantity doesn&rsquo;t necessarily mean much. We usually just need a tiny subset of it.</p>

<p>And that flag functionality I wrote - well, my local server spit the JSON response back within 6ms.</p>

<div class="thumbnail">
  <div class="img-wrapper">

    

    
      <img src="http://www.gizra.com/assets/images/posts/yesod-drupal/flag.gif">
    

  </div>
  
    <div class="caption">Flagging a user</div>
  
</div>

<p>6ms! The same JSON response took about 200ms on my local coming from Drupal.</p>

<p>&ldquo;But that is not fair!&rdquo;, you may say, &ldquo;the comparison isn&rsquo;t right. Drupal does so much more out of the box!&rdquo;</p>

<p>You are, of course, right. But on the other hand - 6ms. When I clicked the flag link, I didn&rsquo;t need the other stuff Drupal brought (and bootstraps on each request). I just needed my item to be flagged. And it was. In 6ms.  </p>

<p>Our users don&rsquo;t care about the underlying technology. They just want it fast. But then again, it&rsquo;s very hard to compete with Drupal&rsquo;s community, maturity, eco-system, hosting providers, etc.</p>

<p>It&rsquo;s up to us to select the right tool for the job, and that&rsquo;s why I love web development and my job so much.</p>

<h2>How to start</h2>

<p>If I got you interested, here are some good resources:</p>

<ul>
<li><a href="https://guide.elm-lang.org/">Elm guide</a></li>
<li><a href="http://book.realworldhaskell.org/">Real World Haskell</a> - Free book.</li>
<li><a href="http://haskellbook.com/">Haskell book</a> - Costs money. Worth every dollar.</li>
<li><a href="http://www.yesodweb.com/">Yesod book</a> - I wish all frameworks came with such great documentation and real world examples.</li>
</ul>


      </div>
    </div>
  </div>
</article>
<section id="post-nav">
  <div class="container">
    <div class="row">
      <div class="col-sm-3 col-sm-offset-3 col-xs-6 previous">
        
        <a href="/content/dynamic-email-template">
          <div id="previous-label" class="text-small">
            <span class="hidden-xs"><i class="fa fa-chevron-circle-left"></i>&nbsp;Creating a Dynamic Email Template in Drupal</span>
            <span class="visible-xs"><i class="fa fa-chevron-circle-left"></i>&nbsp;Previous post</span>
          </div>
        </a>
        
      </div>
      <div class="col-sm-3 col-sm-offset-2 col-xs-6 next">
        
        <a href="/content/elm-inbox-simulation">
          <div id="next-label" class="text-small">
            <span class="hidden-xs">Web Frameworks, Proof of Concept, and Building an Inbox Simulation&nbsp;<i class="fa fa-chevron-circle-right"></i></span>
            <span class="visible-xs">Next post&nbsp;<i class="fa fa-chevron-circle-right"></i></span>
          </div>
        </a>
        
      </div>
    </div>
  </div>
</section>
<section>
  <div class="container">
    <div class="row">
      <div class="col-sm-8 col-sm-offset-3">
        <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'gizra';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

      </div>
    </div>
  </div>
</section>
    


    <!--Footer -->
    
  <div id="contact">
    <footer id="footer" role="contentinfo">
      <div class="footer-wrapper">
        <div class="background">
          <div class="container">
            <div class="row">
              <div class="col-sm-12">
                <h2 class="title">Talk to us</h2>
                <div class="clearfix">
                  <address>
                    <div class="strong">Israel Headquarters</div>
                    <span>5 Brenner Street, Tel Aviv</span>
                      <a class="telephone" href="tel:+97233731222">+972-3-3731222</a>
                    <a class="email" href="mailto:info@gizra.com">info@gizra.com</a>
                  </address>
                  <address class="separator">
                    <div class="strong">North America Office</div>
                    <span>106 West 32nd Street, 2nd Floor, New York, NY 10001</span>
                    <a class="telephone" href="tel:+13476864508">212-634-1687</a>
                    <a class="email" href="mailto:usoffice@gizra.com">usoffice@gizra.com</a>
                  </address>
                  <div class="separator social-links">
                    <span class="link github">
                      <a href="https://github.com/Gizra" target="_blank"><i class="fa fa-github-square"></i><span class="link-text">Gizra's Github Account</span></a>
                    </span>
                    <span class="link twitter">
                      <a href="https://twitter.com/gizra_drupal" target="_blank"><i class="fa fa-twitter-square"></i><span class="link-text">Gizra's Twitter Account</span></a>
                    </span>
                    <span class="link linkedin">
                      <a href="https://www.linkedin.com/company/gizra-ltd" target="_blank"><i class="fa fa-linkedin-square"></i><span class="link-text">Gizra's LinkedIn Page</span></a>
                    </span>
                    <span class="link facebook">
                      <a href="https://www.facebook.com/gizraltd/timeline" target="_blank"><i class="fa fa-facebook-square"></i><span class="link-text">Gizra's Facebook Page</span></a>
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
  </div>



    <script src="/js/plugins.badd.js"></script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script>

    <script src="/js/scripts.f755.js"></script>
    </body>
</html>
