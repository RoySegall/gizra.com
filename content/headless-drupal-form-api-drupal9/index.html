<!DOCTYPE html><html><head><title>Headless Drupal - Form API, Drupal 9</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta property=og:site_name content=Gizra><meta property=og:title content="Headless Drupal - Form API, Drupal 9"><link rel=apple-touch-icon sizes=180x180 href=/assets/favicons/apple-touch-icon-180x180.png><link rel=icon type=image/png href=/assets/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/assets/favicons/favicon-194x194.png sizes=194x194><link rel=icon type=image/png href=/assets/favicons/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=/assets/favicons/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=/assets/favicons/favicon-16x16.png sizes=16x16><link rel=manifest href=/assets/favicons/manifest.json><meta name=msapplication-TileColor content=#000000><meta name=msapplication-TileImage content=/assets/favicons/mstile-144x144.png><meta name=theme-color content=#ffffff><link href="https://fonts.googleapis.com/css?family=Rasa" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/semantic.min.css integrity="sha256-wT6CFc7EKRuf7uyVfi+MQNHUzojuHN2pSw0YWFt2K5E=" crossorigin="anonymous"/><link rel=stylesheet href="/assets/stylesheets/style.css"/><script src=https://code.jquery.com/jquery-2.2.4.min.js integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/semantic.min.js integrity="sha256-flVaeawsBV96vCHiLmXn03IRJym7+ZfcLVvUWONCas8=" crossorigin=anonymous></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6558346-3', 'auto');
  ga('send', 'pageview');</script></head><body class=pushable><div class="ui sidebar inverted vertical menu left"><a class="item active" href="/">Home</a> <a class=item href=/team>Team</a> <a class=item href=/blog>Blog</a> <a class=item href=/projects>Projects</a> <a class=item href=/contact>Contact</a></div><div class=pusher><div class="ui grid container"><header class=row><div class="five wide column menu bar"><div class="ui large secondary menu"><a class="item sidebar-toggle"><i class="big sidebar icon"></i> Menu</a></div></div><div class="six wide computer eleven wide tablet column center aligned"><a class=gizra-logo href="/"><svg xmlns=http://www.w3.org/2000/svg width=252 height=104><title>gizra</title><path fill=#E27058 fill-rule=evenodd d="M44.3 21.6c.2 3.5 3 5.4 6 5.4 3.5 0 6.7-2 6.7-7s-3.6-7.7-8.5-7.7c-4.3 0-10.3 2.5-10.3 11 0 1.7.2 3.4.6 5.3-3.4-2-6.5-2.6-11.6-2.6-16 0-22.7 7.6-22.7 17.5 0 8.7 4 13.7 12.2 16-8.2 5-12 7.8-12 13.8C4.7 78 8 83 20.7 83h10c11 0 13.4 2 13.4 7 0 6.7-5.8 11.3-17 11.3s-13.4-4.7-13.4-9c0-1.8.2-3.5 1-5.8l-6.4-3C4.5 84.8.2 87 .2 92c0 6.8 7.5 11.3 25.8 11.3 21.2 0 29.6-8.5 29.6-20 0-14.4-12-17.2-23.8-17.2H21c-5.5 0-6.6-.4-6.6-1.4 0-1 1-2 4.6-4.4 2.2.4 5.4.8 8.5.8C40.3 61 49 55 49 43c0-6.8-4-10.5-8-13.3-.6-2.5-.8-4.6-.8-6.3 0-6.5 3-7 4.5-7 2.2 0 2.8 1.7 2.5 3.4l-3 1.8zM22 41.2C22 29.7 24 28 27 28s4.6 1.4 4.6 13.2v5c0 11-1.8 12.7-4.6 12.7-3.2 0-5-2.3-5-12V41zM62 10c0 4.4 2 9.8 10.6 9.8 7.6 0 10.6-4.3 10.6-10 0-6.3-3.8-9.6-10.4-9.6C65 .2 62 5 62 10zm-5.4 17v2h6.2v46H57v2h31.2v-2h-6V27H56.7zm82.5 0H95l-1.4 20.2H95c4.3-15 8-18.3 22.2-18.3h1L93 75.3V77h44l1.8-21.5h-1.5C133.5 69 127.5 75 115.6 75h-1.4l25-46v-2zm41 3c2.2 0 4.3 1 2.2 5.3h-3.8c-2.2 7.5 1 12 8.2 12 5.6 0 8.8-4 8.8-10 0-8-5-11.3-11.2-11.3-6.3 0-12 3.6-14 11V27H145v2h5.7v46h-5.8v2h32.6v-2h-7.4V47c0-9.5 4.7-17 9.7-17zm40.5 22.3c-15 0-24.2 2.4-24.2 13 0 10.5 8.2 12.8 15.6 12.8 7.2 0 10.3-2.7 12-7.7 1.2 5 6 7.8 14.4 7.8 9 0 13-3.5 13.5-16l-1.7-.2c-.5 8.8-2.3 10.8-4.2 10.8-1.7 0-3-1.2-3-5.5V46c0-15.2-5.5-19.8-22-19.8-14.3 0-22 4-22 13 0 5 2.6 8.6 9 8.6 5.3 0 9.3-3.3 9.3-8.2 0-2-.3-3.4-.8-4.7H214c-.6-1.2-.8-2.2-.8-3 0-3.4 3-4.3 5-4.3 4.2 0 5.3 3.5 5.3 16.8v8h-3zM219 73.8c-2 0-2.7-1-2.7-8.6v-1.6c0-6.4 2-9.6 6.5-9.6h.7v9.8c0 6.7-2.5 10-4.5 10z"/></svg></a><div class=tagline>We Build Websites</div></div><div class="five wide computer only column"></div></header><div class="ui grid centered post"><div class="sixteen wide mobile sixteen wide tablet twelve wide computer column"><div class="ui raised padded segment"><h1 class="ui dividing header"><div class="ui image"><img src=/assets/images/team/avatars/amitaibu.jpg class="ui circular image"></div><div class=content><a href="/content/headless-drupal-form-api-drupal9/">Headless Drupal - Form API, Drupal 9</a><div class="sub header">By Amitai Burstein (@amitaibu) // 24 Jul 2014</div></div><div class="right floated column"><a href=/blog class="ui teal right ribbon label">Blog post</a></div></h1><h2 id=defining-moment>Defining moment</h2><p>A few months ago my DrupalCon Austin session was rejected. I was a bit upset, since presenting plays a big part in my trip to the states, and also surprised, as I mistakenly assumed my presentation repertoire would almost guarantee my session would be accepted. But the committee decided differently.</p><p>This has been an important moment for me. Two days later I told myself I don’t care. I mean, I cared about the <em>presentation</em>, I just stopped caring that it was not selected, since I decided I was going to do it anyway. As an “unplugged” BoF.</p><p><a href=https://www.getpantheon.com/blog/drupal-development-gizra-way>The Gizra Way</a>. I think this is probably the best presentation I’ve given so far, and quite ironically my <em>rejected</em> session is second only to Dries’s keynote in YouTube.</p><p>You see - I had a “<a href="https://www.youtube.com/watch?v=dzm8kTIj_0M">there is no spoon</a>” moment. The second I realized it can be done differently, I was on my own track, perhaps even setting the path for others.</p><h2 id=form-api-drupal-9>Form API, Drupal 9</h2><blockquote><p>I use Drupal because Form API is so great &lt;div class="small"&gt;No one, ever&lt;/div&gt;</p></blockquote><p>Form API is the unbent spoon. Yes, I can appreciate its role, and how it improved security and extensibility. But nowadays I think we might have better alternatives, which are more inline with where the web is heading.</p><p>Maybe we should stop thinking about forms as forms.</p><p>Maybe Drupal should spit a JSON, that AngularJS (or another library) can leverage to build its dynamic input fields. Those forms don’t need to be written manually, we could use something like <a href=http://justmaier.github.io/angular-autoFields-bootstrap/#demo>Angular Autofields</a> (the concept, not necessarily the code).</p><p>Drupal’s strength is in its entity and field API. It’s so easy to create structured data. If we stopped thinking about forms as forms, and moved to thinking about them as a <em>RESTful interface</em> to the underlying entity, then suddenly it’s easier to bend the spoon. In fact, the spoon might no longer be there.</p><h2 id=best-practices-need-to-be-practiced>Best practices need to be practiced</h2><p>Headless Drupal is a hot topic. We’re trying to figure how it will be used for Drupal 8. Some even plan for Drupal 9. I’d like to suggest something else - Let’s do it now.</p><p>I’ll explain: The concept of Headless Drupal by itself is pretty simple. Send JSON from the server, and use that in the client side. So how come we’re not seeing everybody move to fully/semi decoupled sites?</p><p>I think the answer to that is that we’re still lacking the best practices. Everybody can declare a <code class=highlighter-rouge>hook_menu()</code> and send a JSON response, but unless there are best practices and some sort of standardization few people will, as it will require re-inventing the wheel over and over again.</p><p>This is where the <a href=https://github.com/Gizra/restful>RESTful</a> module, and our Headless Drupal post series comes in. We’re trying to fill the gap of those missing best practices, and do that in real life scenarios, for websites developed and deployed today.</p><p>That’s without neglecting the future, of course - we plan to upgrade RESTful to Drupal 8, since it has some different concepts than Drupal 8’s REST module.</p><h2 id=less-theory-more-code>Less Theory, More Code</h2><p>Ok, so back to the fun geeky stuff, as the headless series <a href="http://www.gizra.com/content/headless-drupal-inline-edit/">continues</a>.</p><p>This time we’ll see how RESTful deals with a common scenario - a node referencing taxonomy terms. The Select2 library provides us with a nice UI, which allows selecting existing terms as well as creating new ones:</p><div class="ui segments"><div class="ui attached center aligned segment"><div class="ui image"><img src="http://www.gizra.com/assets/images/posts/headless-drupal-form-api-9/image1.gif"/></div></div><div class="ui attached center aligned caption segment">AngularJS form with Select2 in action</div></div><p>An interesting part of the example is that the creation of the multiple entities (i.e. the node and the taxonomy terms) is done in a <em>single</em> HTTP request. The sub resources (in our example the taxonomy terms), are POSTed or PATCHed / PUT as needed.</p><p>As always, you can play with the <a href=http://test-gizra-headless-drupal-inline-edit.gotpantheon.com/restful-example/form>live demo</a>.</p></div></div><div class="twelve wide column computer only"><div class="ui borderless secondary menu"><a class=item href="/content/headless-drupal-inline-edit/"><i class="chevron left icon"></i> Headless Drupal - Inline edit</a><div class="right menu"><a class=item href="/content/gizra-we-have-got-your-headless-covered/">Gizra - We've Got Your Headless Covered <i class="chevron right icon"></i></a></div></div></div><div class="twelve wide column"><div class="ui segment basic"><div id=disqus_thread></div><script type=text/javascript>var disqus_shortname = 'gizra';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></div></div><footer class="ui black inverted vertical footer segment padded"><div class="ui center aligned container"><div class="ui three column stackable inverted grid"><div class=column><address><div class=strong>Israel Headquarters</div><div>5 Brenner Street, Tel Aviv</div><a class=telephone href=tel:+97233731222>+972-3-3731222</a> // <a class=email href=mailto:info@gizra.com>info@gizra.com</a></address></div><div class="column icons"><a target=_blank href=https://twitter.com/gizra_drupal><i class="twitter huge icon"></i></a> <a target=_blank href=https://github.com/Gizra/gizra.com><i class="github huge icon"></i></a></div><div class=column><address><div class=strong>North America Office</div><div>350 N. Orleans Street, Suite 9000N, Chicago, IL 60647</div><a class=telephone href=tel:+13125857625>312-585-7625</a> // <a class=email href=mailto:usoffice@gizra.com>usoffice@gizra.com</a></address></div></div></div></footer></div><script src=/bower_components/anchor-js/anchor.min.js></script><script src=/assets/javascript/script.js></script></body></html>